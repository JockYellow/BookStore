

===== docs\reports.html =====
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>報表分析 - 書房記帳與營運管理系統</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" rel="stylesheet">
    <link href="./static/css/styles.css" rel="stylesheet">
</head>
<body class="bg-gray-100">
    <!-- 導航欄 -->
    <nav class="bg-blue-600 text-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="./" class="text-xl font-bold">📚 書房管理系統</a>
                </div>
                <div class="hidden md:flex items-center space-x-4">
                    <a href="./" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700">
                        <i class="fas fa-tachometer-alt mr-1"></i> 儀表板
                    </a>
                    <a href="./products.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700">
                        <i class="fas fa-box mr-1"></i> 商品管理
                    </a>
                    <a href="./purchases.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700">
                        <i class="fas fa-shopping-cart mr-1"></i> 進貨管理
                    </a>
                    <a href="./sales.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700">
                        <i class="fas fa-cash-register mr-1"></i> 銷售管理
                    </a>
                    <a href="./members.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700">
                        <i class="fas fa-users mr-1"></i> 會員管理
                    </a>
                    <a href="./suppliers.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700">
                        <i class="fas fa-truck mr-1"></i> 供應商管理
                    </a>
                    <a href="./reports.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700">
                        <i class="fas fa-chart-bar mr-1"></i> 報表分析
                    </a>
                </div>
                <div class="md:hidden flex items-center">
                    <button id="mobile-menu-button" class="text-white focus:outline-none">
                        <i class="fas fa-bars text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- 移動端菜單 -->
        <div id="mobile-menu" class="md:hidden hidden pb-4 px-4">
            <a href="./" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-700">
                <i class="fas fa-tachometer-alt mr-2"></i> 儀表板
            </a>
            <a href="./products.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-700">
                <i class="fas fa-box mr-2"></i> 商品管理
            </a>
            <a href="./purchases.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-700">
                <i class="fas fa-shopping-cart mr-2"></i> 進貨管理
            </a>
            <a href="./sales.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-700">
                <i class="fas fa-cash-register mr-2"></i> 銷售管理
            </a>
            <a href="./members.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-700">
                <i class="fas fa-users mr-2"></i> 會員管理
            </a>
            <a href="./suppliers.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-700">
                <i class="fas fa-truck mr-2"></i> 供應商管理
            </a>
            <a href="./reports.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-700">
                <i class="fas fa-chart-bar mr-2"></i> 報表分析
            </a>
        </div>
    </nav>

    <!-- 主要內容 -->
    <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
        
<div class="bg-white shadow rounded-lg p-6">
    <h1 class="text-2xl font-bold text-gray-800 mb-6">報表分析</h1>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <div class="bg-white p-4 rounded shadow">
            <h2 class="text-lg font-semibold mb-2">每日銷售額</h2>
            <canvas id="dailySalesChart" class="h-64"></canvas>
        </div>
        <div class="bg-white p-4 rounded shadow">
            <h2 class="text-lg font-semibold mb-2">分類銷售額</h2>
            <canvas id="categorySalesChart" class="h-64"></canvas>
        </div>
    </div>

    <div class="mt-6 bg-white p-4 rounded shadow">
        <h2 class="text-lg font-semibold mb-2">熱銷商品</h2>
        <table class="min-w-full divide-y divide-gray-200">
            <thead>
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">商品</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">銷售額</th>
                </tr>
            </thead>
            <tbody id="topProductsBody" class="bg-white divide-y divide-gray-200">
                <tr><td colspan="2" class="text-center py-4">載入中...</td></tr>
            </tbody>
        </table>
    </div>
</div>

    </main>

    <!-- 頁腳 -->
    <footer class="bg-white mt-12">
        <div class="max-w-7xl mx-auto py-6 px-4 overflow-hidden sm:px-6 lg:px-8">
            <p class="text-center text-gray-500 text-sm">
                &copy; 2025 書房記帳與營運管理系統. All rights reserved.
            </p>
        </div>
    </footer>

    <!-- 全局組件 -->
    <!-- 加載指示器 -->
<div id="loading" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-lg p-6 shadow-xl">
        <div class="flex items-center">
            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
            <span class="ml-3 text-gray-700">載入中，請稍候...</span>
        </div>
    </div>
</div>
    <!-- 通知訊息 -->
<div id="notifications" class="fixed top-4 right-4 z-50 space-y-2 w-80">
    <!-- 成功通知 -->
    <div id="success-notification" class="notification hidden bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert">
        <div class="flex items-center">
            <i class="fas fa-check-circle mr-2"></i>
            <span class="notification-message">操作成功！</span>
        </div>
        <button class="absolute top-0 bottom-0 right-0 px-4 py-3 close-notification">
            <i class="fas fa-times"></i>
        </button>
    </div>
    
    <!-- 錯誤通知 -->
    <div id="error-notification" class="notification hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert">
        <div class="flex items-center">
            <i class="fas fa-exclamation-circle mr-2"></i>
            <span class="notification-message">發生錯誤！</span>
        </div>
        <button class="absolute top-0 bottom-0 right-0 px-4 py-3 close-notification">
            <i class="fas fa-times"></i>
        </button>
    </div>
    
    <!-- 警告通知 -->
    <div id="warning-notification" class="notification hidden bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative" role="alert">
        <div class="flex items-center">
            <i class="fas fa-exclamation-triangle mr-2"></i>
            <span class="notification-message">警告訊息</span>
        </div>
        <button class="absolute top-0 bottom-0 right-0 px-4 py-3 close-notification">
            <i class="fas fa-times"></i>
        </button>
    </div>
</div>
    <!-- 確認對話框 -->
<div id="confirm-dialog" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-lg shadow-xl w-96">
        <!-- Header -->
        <div class="px-6 py-4 border-b border-gray-200">
            <h3 class="text-lg font-medium text-gray-900" id="confirm-title">確認操作</h3>
        </div>
        
        <!-- Body -->
        <div class="px-6 py-4">
            <p class="text-gray-600" id="confirm-message">您確定要執行此操作嗎？此操作無法復原。</p>
        </div>
        
        <!-- Footer -->
        <div class="px-6 py-4 bg-gray-50 text-right rounded-b-lg">
            <button type="button" id="confirm-cancel" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                取消
            </button>
            <button type="button" id="confirm-ok" class="ml-3 inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                確認
            </button>
        </div>
    </div>
</div>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="./static/js/ui.js"></script>      
    <script src="./static/js/main.js"></script>    
<script src="./static/js/reports.js"></script>

</body>
</html>

===== docs\sales.html =====
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>銷售管理 - 書房記帳與營運管理系統</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" rel="stylesheet">
    <link href="./static/css/styles.css" rel="stylesheet">
</head>
<body class="bg-gray-100">
    <!-- 導航欄 -->
    <nav class="bg-blue-600 text-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="./" class="text-xl font-bold">📚 書房管理系統</a>
                </div>
                <div class="hidden md:flex items-center space-x-4">
                    <a href="./" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700">
                        <i class="fas fa-tachometer-alt mr-1"></i> 儀表板
                    </a>
                    <a href="./products.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700">
                        <i class="fas fa-box mr-1"></i> 商品管理
                    </a>
                    <a href="./purchases.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700">
                        <i class="fas fa-shopping-cart mr-1"></i> 進貨管理
                    </a>
                    <a href="./sales.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700">
                        <i class="fas fa-cash-register mr-1"></i> 銷售管理
                    </a>
                    <a href="./members.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700">
                        <i class="fas fa-users mr-1"></i> 會員管理
                    </a>
                    <a href="./suppliers.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700">
                        <i class="fas fa-truck mr-1"></i> 供應商管理
                    </a>
                    <a href="./reports.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700">
                        <i class="fas fa-chart-bar mr-1"></i> 報表分析
                    </a>
                </div>
                <div class="md:hidden flex items-center">
                    <button id="mobile-menu-button" class="text-white focus:outline-none">
                        <i class="fas fa-bars text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- 移動端菜單 -->
        <div id="mobile-menu" class="md:hidden hidden pb-4 px-4">
            <a href="./" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-700">
                <i class="fas fa-tachometer-alt mr-2"></i> 儀表板
            </a>
            <a href="./products.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-700">
                <i class="fas fa-box mr-2"></i> 商品管理
            </a>
            <a href="./purchases.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-700">
                <i class="fas fa-shopping-cart mr-2"></i> 進貨管理
            </a>
            <a href="./sales.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-700">
                <i class="fas fa-cash-register mr-2"></i> 銷售管理
            </a>
            <a href="./members.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-700">
                <i class="fas fa-users mr-2"></i> 會員管理
            </a>
            <a href="./suppliers.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-700">
                <i class="fas fa-truck mr-2"></i> 供應商管理
            </a>
            <a href="./reports.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-700">
                <i class="fas fa-chart-bar mr-2"></i> 報表分析
            </a>
        </div>
    </nav>

    <!-- 主要內容 -->
    <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
        
<div class="min-h-screen bg-gray-100">
    <!-- 頂部標題與按鈕 -->
    <div class="bg-white shadow">
        <div class="max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-gray-900">銷售收銀台</h1>
            <div class="flex space-x-3">
                <button id="new-sale-btn" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    <i class="fas fa-plus-circle mr-2"></i> 新交易
                </button>
                <a href="./sales/history.html" class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    <i class="fas fa-history mr-2"></i> 銷售記錄
                </a>
            </div>
        </div>
    </div>

    <div class="max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- 左側：商品列表 -->
            <div class="lg:col-span-2 space-y-4">
                <!-- 搜尋與篩選 -->
                <div class="bg-white p-4 rounded-lg shadow">
                    <div class="flex flex-col sm:flex-row gap-3">
                        <div class="flex-1">
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-search text-gray-400"></i>
                                </div>
                                <input type="text" id="product-search" class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="掃描條碼或搜尋商品...">
                            </div>
                        </div>
                        <select id="category-filter" class="block w-full sm:w-auto pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md">
                            <option value="">所有分類</option>
                            <option value="book">書籍</option>
                            <option value="stationery">文具</option>
                            <option value="gift">禮品</option>
                            <option value="other">其他</option>
                        </select>
                    </div>
                </div>

                <!-- 商品網格 -->
                <div class="bg-white p-4 rounded-lg shadow">
                    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 gap-3" id="product-grid">
                        <!-- 商品項目會動態載入 -->
                        <div class="text-center py-8 text-gray-500">
                            <div class="animate-pulse">
                                <div class="h-4 bg-gray-200 rounded w-3/4 mx-auto mb-2"></div>
                                <div class="h-3 bg-gray-200 rounded w-1/2 mx-auto"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 分頁控制 -->
                    <div class="mt-4 flex items-center justify-between border-t border-gray-200 px-4 py-3 sm:px-6">
                        <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                            <div>
                                <p class="text-sm text-gray-700">
                                    顯示 <span id="start-item" class="font-medium">0</span> 至 <span id="end-item" class="font-medium">0</span> 筆，共 <span id="total-items" class="font-medium">0</span> 筆商品
                                </p>
                            </div>
                            <div>
                                <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                                    <button id="prev-page" class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                        <span class="sr-only">上一頁</span>
                                        <i class="fas fa-chevron-left h-5 w-5"></i>
                                    </button>
                                    <div id="pagination-numbers" class="flex">
                                        <!-- 分頁數字會動態生成 -->
                                    </div>
                                    <button id="next-page" class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                        <span class="sr-only">下一頁</span>
                                        <i class="fas fa-chevron-right h-5 w-5"></i>
                                    </button>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 右側：購物車與結帳 -->
            <div class="space-y-4">
                <!-- 會員資訊 -->
                <div class="bg-white p-4 rounded-lg shadow">
                    <div class="flex justify-between items-center mb-3">
                        <h3 class="text-lg font-medium text-gray-900">會員資訊</h3>
                        <button id="select-member" class="text-sm text-blue-600 hover:text-blue-800">選擇會員</button>
                    </div>
                    <div id="member-info" class="text-sm text-gray-600">
                        <div class="flex items-center">
                            <div class="flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center">
                                <i class="fas fa-user text-gray-400"></i>
                            </div>
                            <div class="ml-3">
                                <p class="text-sm font-medium text-gray-900">非會員顧客</p>
                                <p class="text-xs text-gray-500">無會員折扣</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 購物車 -->
                <div class="bg-white p-4 rounded-lg shadow">
                    <div class="flex justify-between items-center mb-3">
                        <h3 class="text-lg font-medium text-gray-900">購物車</h3>
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800" id="cart-count">0 項商品</span>
                    </div>
                    
                    <div class="border-t border-b border-gray-200 max-h-96 overflow-y-auto" id="cart-items">
                        <!-- 購物車項目會動態載入 -->
                        <div class="py-8 text-center text-gray-500">
                            <i class="fas fa-shopping-cart text-4xl mb-2 opacity-30"></i>
                            <p>購物車是空的</p>
                            <p class="text-sm mt-1">請掃描或點選商品加入購物車</p>
                        </div>
                    </div>
                    
                    <!-- 購物車摘要 -->
                    <div class="mt-4 space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-600">商品小計</span>
                            <span id="subtotal">$0</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">會員折扣</span>
                            <span id="discount-amount">-$0</span>
                        </div>
                        <div class="border-t border-gray-200 pt-2 mt-2 font-medium">
                            <div class="flex justify-between">
                                <span>總計</span>
                                <span id="total-amount" class="text-lg text-blue-600">$0</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 結帳按鈕 -->
                    <div class="mt-4">
                        <button id="checkout-btn" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-lg font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            結帳 <span id="total-items-count">(0)</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 商品詳情 Modal -->
<div id="product-detail-modal" class="fixed z-10 inset-0 overflow-y-auto hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
    <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>
        <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
        <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
            <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                <div class="sm:flex sm:items-start">
                    <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full">
                        <div class="flex justify-between items-start">
                            <h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-product-name">商品名稱</h3>
                            <button type="button" class="close-modal-btn bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none">
                                <span class="sr-only">關閉</span>
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="mt-2">
                            <div class="grid grid-cols-1 gap-4">
                                <div>
                                    <p class="text-sm text-gray-500 mb-2">商品編號: <span id="modal-product-id"></span></p>
                                    <p class="text-2xl font-bold text-gray-900 mb-2" id="modal-product-price">$0</p>
                                    <p class="text-sm text-gray-700 mb-4" id="modal-product-description">商品描述將顯示在這裡</p>
                                    
                                    <div class="mt-4">
                                        <label for="quantity" class="block text-sm font-medium text-gray-700 mb-1">數量</label>
                                        <div class="flex items-center">
                                            <button type="button" class="quantity-btn bg-gray-200 text-gray-700 px-3 py-1 rounded-l-md hover:bg-gray-300">-</button>
                                            <input type="number" id="quantity" min="1" value="1" class="w-16 text-center border-t border-b border-gray-300 py-1">
                                            <button type="button" class="quantity-btn bg-gray-200 text-gray-700 px-3 py-1 rounded-r-md hover:bg-gray-300">+</button>
                                        </div>
                                    </div>
                                    
                                    <div class="mt-6">
                                        <button type="button" id="add-to-cart-btn" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                            加入購物車
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 會員選擇 Modal -->
<div id="member-modal" class="fixed z-10 inset-0 overflow-y-auto hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
    <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>
        <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
        <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
            <div class="bg-white px-4 pt-5 pb-4 sm:p-6">
                <div class="sm:flex sm:items-start">
                    <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full">
                        <div class="flex justify-between items-center">
                            <h3 class="text-lg leading-6 font-medium text-gray-900">選擇會員</h3>
                            <button type="button" class="close-member-modal-btn bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none">
                                <span class="sr-only">關閉</span>
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div class="mt-4">
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-search text-gray-400"></i>
                                </div>
                                <input type="text" id="member-search" class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="搜尋會員姓名或電話...">
                            </div>
                        </div>
                        
                        <div class="mt-4 max-h-96 overflow-y-auto">
                            <ul id="member-list" class="divide-y divide-gray-200">
                                <!-- 會員列表會動態載入 -->
                            </ul>
                        </div>
                        
                        <div class="mt-4 border-t border-gray-200 pt-4">
                            <button type="button" id="non-member-btn" class="w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                                非會員結帳
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 結帳 Modal -->
<div id="checkout-modal" class="fixed z-10 inset-0 overflow-y-auto hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
    <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>
        <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
        <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full">
            <div class="bg-white px-4 pt-5 pb-4 sm:p-6">
                <div class="sm:flex sm:items-start">
                    <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full">
                        <div class="flex justify-between items-center">
                            <h3 class="text-lg leading-6 font-medium text-gray-900">結帳明細</h3>
                            <button type="button" class="close-checkout-modal-btn bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none">
                                <span class="sr-only">關閉</span>
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div class="mt-4">
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm font-medium text-gray-700">會員</span>
                                    <span id="checkout-member" class="text-sm text-gray-900">非會員</span>
                                </div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm font-medium text-gray-700">交易時間</span>
                                    <span id="checkout-time" class="text-sm text-gray-900">2025/03/20 14:30</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm font-medium text-gray-700">交易編號</span>
                                    <span id="checkout-id" class="text-sm text-gray-900">S20250320001</span>
                                </div>
                            </div>
                            
                            <div class="mt-4 border-t border-b border-gray-200 max-h-64 overflow-y-auto">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th scope="col" class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">商品</th>
                                            <th scope="col" class="px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">單價</th>
                                            <th scope="col" class="px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">數量</th>
                                            <th scope="col" class="px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">小計</th>
                                        </tr>
                                    </thead>
                                    <tbody id="checkout-items" class="bg-white divide-y divide-gray-200">
                                        <!-- 結帳項目會動態載入 -->
                                    </tbody>
                                </table>
                            </div>
                            
                            <div class="mt-4">
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">商品小計</span>
                                    <span id="checkout-subtotal">$0</span>
                                </div>
                                <div class="flex justify-between text-sm mt-1">
                                    <span class="text-gray-600">會員折扣</span>
                                    <span id="checkout-discount">-$0</span>
                                </div>
                                <div class="flex justify-between font-medium mt-2 pt-2 border-t border-gray-200">
                                    <span>總計</span>
                                    <span id="checkout-total" class="text-lg text-blue-600">$0</span>
                                </div>
                            </div>
                            
                            <div class="mt-6">
                                <div>
                                    <label for="amount-received" class="block text-sm font-medium text-gray-700 mb-1">實收金額</label>
                                    <div class="mt-1 relative rounded-md shadow-sm">
                                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                            <span class="text-gray-500 sm:text-sm">$</span>
                                        </div>
                                        <input type="number" id="amount-received" class="focus:ring-blue-500 focus:border-blue-500 block w-full pl-7 pr-12 sm:text-sm border-gray-300 rounded-md" placeholder="0.00">
                                    </div>
                                </div>

                                <div class="mt-4 grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">找零</label>
                                        <div class="mt-1 relative rounded-md shadow-sm">
                                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                                <span class="text-gray-500 sm:text-sm">$</span>
                                            </div>
                                            <input type="text" id="change-display" class="bg-gray-100 block w-full pl-7 pr-12 sm:text-sm border-gray-300 rounded-md" value="0" readonly>
                                        </div>
                                    </div>
                                    <div class="flex items-end">
                                        <button type="button" id="calc-change-btn" class="w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                            計算找零
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                <button type="button" id="confirm-checkout-btn" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:ml-3 sm:w-auto sm:text-sm">
                    確認結帳
                </button>
                <button type="button" class="close-checkout-modal-btn mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                    取消
                </button>
                <button type="button" id="print-receipt-btn" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                    <i class="fas fa-print mr-2"></i> 列印收據
                </button>
            </div>
        </div>
    </div>
</div>

<!-- 收據列印模板 (隱藏) -->
<div id="receipt-template" class="hidden">
    <div class="receipt p-4 max-w-xs mx-auto bg-white">
        <div class="text-center mb-2">
            <h2 class="text-lg font-bold">書房記帳與營運管理系統</h2>
            <p class="text-xs text-gray-600">營業時間: 週一至週日 10:00-22:00</p>
            <p class="text-xs text-gray-600">電話: (02) 1234-5678</p>
        </div>
        
        <div class="border-t border-b border-gray-200 py-2 my-2 text-center">
            <p class="text-sm">交易編號: <span id="receipt-id">S20250320001</span></p>
            <p class="text-sm">交易時間: <span id="receipt-time">2025/03/20 14:30:25</span></p>
            <p class="text-sm">收銀員: <span id="receipt-cashier">管理員</span></p>
        </div>
        
        <div class="mb-2">
            <div class="flex justify-between text-sm py-1 border-b border-gray-200">
                <span class="font-medium">商品</span>
                <span class="flex-1 text-right">數量 單價 小計</span>
            </div>
            <div id="receipt-items">
                <!-- 收據項目會動態載入 -->
            </div>
        </div>
        
        <div class="border-t border-b border-gray-200 py-2 my-2">
            <div class="flex justify-between text-sm py-1">
                <span>商品小計:</span>
                <span id="receipt-subtotal">$0</span>
            </div>
            <div class="flex justify-between text-sm py-1">
                <span>會員折扣:</span>
                <span id="receipt-discount">-$0</span>
            </div>
            <div class="flex justify-between font-medium py-1">
                <span>總計:</span>
                <span id="receipt-total">$0</span>
            </div>
            <div class="flex justify-between text-sm py-1">
                <span>實收金額:</span>
                <span id="receipt-received">$0</span>
            </div>
            <div class="flex justify-between text-sm py-1">
                <span>找零:</span>
                <span id="receipt-change">$0</span>
            </div>
        </div>
        
        <div class="text-center mt-4">
            <p class="text-sm">感謝您的光臨！</p>
            <p class="text-xs text-gray-600 mt-1">歡迎再次光臨</p>
            <p class="text-xs text-gray-500 mt-2">* 商品若有問題，請於7日內攜帶發票及商品辦理退換貨 *</p>
        </div>
    </div>
</div>


    </main>

    <!-- 頁腳 -->
    <footer class="bg-white mt-12">
        <div class="max-w-7xl mx-auto py-6 px-4 overflow-hidden sm:px-6 lg:px-8">
            <p class="text-center text-gray-500 text-sm">
                &copy; 2025 書房記帳與營運管理系統. All rights reserved.
            </p>
        </div>
    </footer>

    <!-- 全局組件 -->
    <!-- 加載指示器 -->
<div id="loading" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-lg p-6 shadow-xl">
        <div class="flex items-center">
            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
            <span class="ml-3 text-gray-700">載入中，請稍候...</span>
        </div>
    </div>
</div>
    <!-- 通知訊息 -->
<div id="notifications" class="fixed top-4 right-4 z-50 space-y-2 w-80">
    <!-- 成功通知 -->
    <div id="success-notification" class="notification hidden bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert">
        <div class="flex items-center">
            <i class="fas fa-check-circle mr-2"></i>
            <span class="notification-message">操作成功！</span>
        </div>
        <button class="absolute top-0 bottom-0 right-0 px-4 py-3 close-notification">
            <i class="fas fa-times"></i>
        </button>
    </div>
    
    <!-- 錯誤通知 -->
    <div id="error-notification" class="notification hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert">
        <div class="flex items-center">
            <i class="fas fa-exclamation-circle mr-2"></i>
            <span class="notification-message">發生錯誤！</span>
        </div>
        <button class="absolute top-0 bottom-0 right-0 px-4 py-3 close-notification">
            <i class="fas fa-times"></i>
        </button>
    </div>
    
    <!-- 警告通知 -->
    <div id="warning-notification" class="notification hidden bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative" role="alert">
        <div class="flex items-center">
            <i class="fas fa-exclamation-triangle mr-2"></i>
            <span class="notification-message">警告訊息</span>
        </div>
        <button class="absolute top-0 bottom-0 right-0 px-4 py-3 close-notification">
            <i class="fas fa-times"></i>
        </button>
    </div>
</div>
    <!-- 確認對話框 -->
<div id="confirm-dialog" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-lg shadow-xl w-96">
        <!-- Header -->
        <div class="px-6 py-4 border-b border-gray-200">
            <h3 class="text-lg font-medium text-gray-900" id="confirm-title">確認操作</h3>
        </div>
        
        <!-- Body -->
        <div class="px-6 py-4">
            <p class="text-gray-600" id="confirm-message">您確定要執行此操作嗎？此操作無法復原。</p>
        </div>
        
        <!-- Footer -->
        <div class="px-6 py-4 bg-gray-50 text-right rounded-b-lg">
            <button type="button" id="confirm-cancel" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                取消
            </button>
            <button type="button" id="confirm-ok" class="ml-3 inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                確認
            </button>
        </div>
    </div>
</div>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="./static/js/ui.js"></script>      
    <script src="./static/js/main.js"></script>    
<script src="./static/js/sales.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/zh-tw.js"></script>

</body>
</html>

===== docs\suppliers.html =====
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>供應商管理 - 書房記帳與營運管理系統</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" rel="stylesheet">
    <link href="./static/css/styles.css" rel="stylesheet">
</head>
<body class="bg-gray-100">
    <!-- 導航欄 -->
    <nav class="bg-blue-600 text-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="./" class="text-xl font-bold">📚 書房管理系統</a>
                </div>
                <div class="hidden md:flex items-center space-x-4">
                    <a href="./" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700">
                        <i class="fas fa-tachometer-alt mr-1"></i> 儀表板
                    </a>
                    <a href="./products.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700">
                        <i class="fas fa-box mr-1"></i> 商品管理
                    </a>
                    <a href="./purchases.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700">
                        <i class="fas fa-shopping-cart mr-1"></i> 進貨管理
                    </a>
                    <a href="./sales.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700">
                        <i class="fas fa-cash-register mr-1"></i> 銷售管理
                    </a>
                    <a href="./members.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700">
                        <i class="fas fa-users mr-1"></i> 會員管理
                    </a>
                    <a href="./suppliers.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700">
                        <i class="fas fa-truck mr-1"></i> 供應商管理
                    </a>
                    <a href="./reports.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700">
                        <i class="fas fa-chart-bar mr-1"></i> 報表分析
                    </a>
                </div>
                <div class="md:hidden flex items-center">
                    <button id="mobile-menu-button" class="text-white focus:outline-none">
                        <i class="fas fa-bars text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- 移動端菜單 -->
        <div id="mobile-menu" class="md:hidden hidden pb-4 px-4">
            <a href="./" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-700">
                <i class="fas fa-tachometer-alt mr-2"></i> 儀表板
            </a>
            <a href="./products.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-700">
                <i class="fas fa-box mr-2"></i> 商品管理
            </a>
            <a href="./purchases.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-700">
                <i class="fas fa-shopping-cart mr-2"></i> 進貨管理
            </a>
            <a href="./sales.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-700">
                <i class="fas fa-cash-register mr-2"></i> 銷售管理
            </a>
            <a href="./members.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-700">
                <i class="fas fa-users mr-2"></i> 會員管理
            </a>
            <a href="./suppliers.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-700">
                <i class="fas fa-truck mr-2"></i> 供應商管理
            </a>
            <a href="./reports.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-blue-700">
                <i class="fas fa-chart-bar mr-2"></i> 報表分析
            </a>
        </div>
    </nav>

    <!-- 主要內容 -->
    <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
        
<div class="container mx-auto px-4 py-6">
    <!-- 頁面標題與新增按鈕 -->
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-2xl font-bold text-gray-800">供應商管理</h1>
        <button id="add-supplier-btn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center">
            <i class="fas fa-plus mr-2"></i> 新增供應商
        </button>
    </div>

    <!-- 搜尋與篩選區塊 -->
    <div class="bg-white rounded-lg shadow-md p-4 mb-6">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
            <div class="md:col-span-2">
                <label for="search-supplier" class="block text-sm font-medium text-gray-700 mb-1">搜尋供應商</label>
                <div class="relative">
                    <input type="text" id="search-supplier" class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="輸入供應商名稱或聯絡人">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="fas fa-search text-gray-400"></i>
                    </div>
                </div>
            </div>
            <div>
                <label for="filter-payment" class="block text-sm font-medium text-gray-700 mb-1">結帳方式</label>
                <select id="filter-payment" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                    <option value="">全部</option>
                    <option value="月結30天">月結30天</option>
                    <option value="月結60天">月結60天</option>
                    <option value="貨到付款">貨到付款</option>
                </select>
            </div>
            <div class="flex items-end">
                <button id="filter-btn" class="w-full bg-gray-100 hover:bg-gray-200 text-gray-800 px-4 py-2 rounded-md border border-gray-300">
                    <i class="fas fa-filter mr-2"></i>篩選
                </button>
            </div>
        </div>
    </div>

    <!-- 供應商列表 -->
    <div class="bg-white shadow-md rounded-lg overflow-hidden">
        <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">供應商名稱</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">聯絡人</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">電話</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">結帳方式</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">建立日期</th>
                        <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                    </tr>
                </thead>
                <tbody id="suppliers-list" class="bg-white divide-y divide-gray-200">
                    <!-- 供應商列表將由 JavaScript 動態生成 -->
                </tbody>
            </table>
        </div>
        
        <!-- 分頁控制 -->
        <div class="bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6">
            <div class="flex-1 flex justify-between sm:hidden">
                <button id="prev-page-mobile" class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">上一頁</button>
                <button id="next-page-mobile" class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">下一頁</button>
            </div>
            <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                <div>
                    <p class="text-sm text-gray-700">
                        顯示 <span id="start-item" class="font-medium">1</span> 到 <span id="end-item" class="font-medium">10</span> 筆，共 <span id="total-items" class="font-medium">0</span> 筆
                    </p>
                </div>
                <div>
                    <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                        <button id="prev-page" class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                            <span class="sr-only">上一頁</span>
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <div id="pagination-numbers" class="flex">
                            <!-- 分頁數字將由 JavaScript 動態生成 -->
                        </div>
                        <button id="next-page" class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                            <span class="sr-only">下一頁</span>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 新增/編輯供應商模態框 -->
<div id="supplier-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
    <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto">
        <div class="px-6 py-4 border-b border-gray-200">
            <h3 id="modal-title" class="text-lg font-medium text-gray-900">新增供應商</h3>
        </div>
        <form id="supplier-form" class="p-6">
            <input type="hidden" id="supplier-id">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="col-span-2">
                    <label for="supplier-name" class="block text-sm font-medium text-gray-700 mb-1">供應商名稱 <span class="text-red-500">*</span></label>
                    <input type="text" id="supplier-name" name="name" required
                           class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                </div>
                <div>
                    <label for="contact-person" class="block text-sm font-medium text-gray-700 mb-1">聯絡人 <span class="text-red-500">*</span></label>
                    <input type="text" id="contact-person" name="contact_person" required
                           class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                </div>
                <div>
                    <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">電話 <span class="text-red-500">*</span></label>
                    <input type="tel" id="phone" name="phone" required
                           class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                </div>
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700 mb-1">電子郵件</label>
                    <input type="email" id="email" name="email"
                           class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                </div>
                <div class="col-span-2">
                    <label for="address" class="block text-sm font-medium text-gray-700 mb-1">地址</label>
                    <input type="text" id="address" name="address"
                           class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                </div>
                <div class="col-span-2">
                    <label for="payment-terms" class="block text-sm font-medium text-gray-700 mb-1">結帳方式 <span class="text-red-500">*</span></label>
                    <select id="payment-terms" name="payment_terms" required
                            class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                        <option value="">請選擇結帳方式</option>
                        <option value="月結30天">月結30天</option>
                        <option value="月結60天">月結60天</option>
                        <option value="貨到付款">貨到付款</option>
                        <option value="其他">其他</option>
                    </select>
                </div>
                <div class="col-span-2">
                    <label for="notes" class="block text-sm font-medium text-gray-700 mb-1">備註</label>
                    <textarea id="notes" name="notes" rows="3"
                              class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"></textarea>
                </div>
            </div>
            <div class="mt-6 flex justify-end space-x-3">
                <button type="button" id="cancel-supplier"
                        class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    取消
                </button>
                <button type="submit"
                        class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    儲存
                </button>
            </div>
        </form>
    </div>
</div>

    </main>

    <!-- 頁腳 -->
    <footer class="bg-white mt-12">
        <div class="max-w-7xl mx-auto py-6 px-4 overflow-hidden sm:px-6 lg:px-8">
            <p class="text-center text-gray-500 text-sm">
                &copy; 2025 書房記帳與營運管理系統. All rights reserved.
            </p>
        </div>
    </footer>

    <!-- 全局組件 -->
    <!-- 加載指示器 -->
<div id="loading" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-lg p-6 shadow-xl">
        <div class="flex items-center">
            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
            <span class="ml-3 text-gray-700">載入中，請稍候...</span>
        </div>
    </div>
</div>
    <!-- 通知訊息 -->
<div id="notifications" class="fixed top-4 right-4 z-50 space-y-2 w-80">
    <!-- 成功通知 -->
    <div id="success-notification" class="notification hidden bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert">
        <div class="flex items-center">
            <i class="fas fa-check-circle mr-2"></i>
            <span class="notification-message">操作成功！</span>
        </div>
        <button class="absolute top-0 bottom-0 right-0 px-4 py-3 close-notification">
            <i class="fas fa-times"></i>
        </button>
    </div>
    
    <!-- 錯誤通知 -->
    <div id="error-notification" class="notification hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert">
        <div class="flex items-center">
            <i class="fas fa-exclamation-circle mr-2"></i>
            <span class="notification-message">發生錯誤！</span>
        </div>
        <button class="absolute top-0 bottom-0 right-0 px-4 py-3 close-notification">
            <i class="fas fa-times"></i>
        </button>
    </div>
    
    <!-- 警告通知 -->
    <div id="warning-notification" class="notification hidden bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative" role="alert">
        <div class="flex items-center">
            <i class="fas fa-exclamation-triangle mr-2"></i>
            <span class="notification-message">警告訊息</span>
        </div>
        <button class="absolute top-0 bottom-0 right-0 px-4 py-3 close-notification">
            <i class="fas fa-times"></i>
        </button>
    </div>
</div>
    <!-- 確認對話框 -->
<div id="confirm-dialog" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-lg shadow-xl w-96">
        <!-- Header -->
        <div class="px-6 py-4 border-b border-gray-200">
            <h3 class="text-lg font-medium text-gray-900" id="confirm-title">確認操作</h3>
        </div>
        
        <!-- Body -->
        <div class="px-6 py-4">
            <p class="text-gray-600" id="confirm-message">您確定要執行此操作嗎？此操作無法復原。</p>
        </div>
        
        <!-- Footer -->
        <div class="px-6 py-4 bg-gray-50 text-right rounded-b-lg">
            <button type="button" id="confirm-cancel" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                取消
            </button>
            <button type="button" id="confirm-ok" class="ml-3 inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                確認
            </button>
        </div>
    </div>
</div>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="./static/js/ui.js"></script>      
    <script src="./static/js/main.js"></script>    
<script src="./static/js/suppliers.js"></script>

</body>
</html>

===== docs\data\members.json =====
[
  {
    "id": "M001",
    "name": "王小明",
    "phone": "0912345678",
    "email": "ming@example.com",
    "address": "台北市大安區復興南路一段100號",
    "birthday": "1990-05-15",
    "join_date": "2025-01-10T10:00:00Z",
    "total_purchases": 5,
    "total_spent": 3500,
    "last_visit": "2025-07-20T10:15:00Z",
    "notes": "常購買靈修類書籍",
    "created_at": "2025-01-10T10:00:00Z",
    "updated_at": "2025-07-20T10:15:00Z"
  },
  {
    "id": "M002",
    "name": "林小華",
    "phone": "0922333444",
    "email": "hua@example.com",
    "address": "新北市板橋區文化路一段200號",
    "birthday": "1985-10-20",
    "join_date": "2025-02-15T14:30:00Z",
    "total_purchases": 3,
    "total_spent": 2800,
    "last_visit": "2025-07-18T16:45:00Z",
    "notes": "偏好神學類書籍",
    "created_at": "2025-02-15T14:30:00Z",
    "updated_at": "2025-07-18T16:45:00Z"
  },
  {
    "id": "M003",
    "name": "陳小美",
    "phone": "0933555777",
    "email": "mei@example.com",
    "address": "台北市信義區信義路五段50號",
    "birthday": "1995-03-25",
    "join_date": "2025-03-05T11:20:00Z",
    "total_purchases": 2,
    "total_spent": 1500,
    "last_visit": "2025-07-10T13:15:00Z",
    "notes": "新會員，購買兒童聖經",
    "created_at": "2025-03-05T11:20:00Z",
    "updated_at": "2025-07-10T13:15:00Z"
  },
  {
    "id": "M0002",
    "name": "JJ",
    "phone": "0909090990",
    "email": "123@GG",
    "birthday": "2025-07-24",
    "member_level": "standard",
    "status": "active",
    "address": "123",
    "notes": "456",
    "total_spent": 0,
    "points": 0,
    "created_at": "2025-07-24T17:48:11.616828",
    "updated_at": "2025-07-24T17:48:11.616828"
  }
]

===== docs\data\products.json =====
[
  {
    "name": "原子習慣",
    "category": "書籍",
    "purchase_price": 280,
    "sale_price": 350,
    "stock": 50,
    "created_at": "2025-07-01T10:00:00+08:00",
    "updated_at": "2025-07-24T18:18:48.916415",
    "id": "P001"
  },
  {
    "id": "P002",
    "name": "被討厭的勇氣",
    "category": "心理勵志",
    "purchase_price": 220,
    "sale_price": 280,
    "stock": 25,
    "supplier_id": "S001",
    "created_at": "2025-07-01T10:00:00+08:00",
    "updated_at": "2025-07-24T10:00:00+08:00"
  },
  {
    "id": "P101",
    "name": "筆記本",
    "category": "文具",
    "purchase_price": 15,
    "sale_price": 25,
    "stock": 100,
    "supplier_id": "S002",
    "created_at": "2025-07-15T09:30:00+08:00",
    "updated_at": "2025-07-24T14:30:00+08:00"
  },
  {
    "id": "P102",
    "name": "原子筆",
    "category": "文具",
    "purchase_price": 8,
    "sale_price": 15,
    "stock": 200,
    "supplier_id": "S002",
    "created_at": "2025-07-15T09:30:00+08:00",
    "updated_at": "2025-07-24T14:30:00+08:00"
  },
  {
    "id": "P201",
    "name": "高級鋼筆",
    "category": "文具",
    "purchase_price": 900,
    "sale_price": 1200,
    "stock": 15,
    "supplier_id": "S003",
    "created_at": "2025-07-20T11:00:00+08:00",
    "updated_at": "2025-07-23T09:15:00+08:00"
  },
  {
    "id": "P301",
    "name": "高級書架",
    "category": "傢俱",
    "purchase_price": 2000,
    "sale_price": 2500,
    "stock": 5,
    "supplier_id": "S004",
    "created_at": "2025-07-18T14:00:00+08:00",
    "updated_at": "2025-07-22T16:45:00+08:00"
  },
  {
    "id": "P401",
    "name": "暢銷小說",
    "category": "小說",
    "purchase_price": 140,
    "sale_price": 180,
    "stock": 50,
    "supplier_id": "S005",
    "created_at": "2025-07-15T10:00:00+08:00",
    "updated_at": "2025-07-22T10:30:00+08:00"
  },
  {
    "id": "P402",
    "name": "商業理財書",
    "category": "商業",
    "purchase_price": 180,
    "sale_price": 220,
    "stock": 30,
    "supplier_id": "S005",
    "created_at": "2025-07-15T10:00:00+08:00",
    "updated_at": "2025-07-22T10:30:00+08:00"
  },
  {
    "id": "P403",
    "name": "兒童繪本",
    "category": "兒童",
    "purchase_price": 120,
    "sale_price": 150,
    "stock": 40,
    "supplier_id": "S005",
    "created_at": "2025-07-15T10:00:00+08:00",
    "updated_at": "2025-07-22T10:30:00+08:00"
  }
]


===== docs\data\purchases.json =====
[
  {
    "id": "1",
    "purchase_number": "PO-20250724-0001",
    "supplier_id": "S001",
    "purchase_date": "2025-07-24T10:00:00+08:00",
    "expected_delivery_date": "2025-07-31T23:59:59+08:00",
    "status": "received",
    "shipping_fee": 150,
    "tax_rate": 5,
    "notes": "一般圖書進貨",
    "items": [
      {
        "product_id": "P001",
        "quantity": 20,
        "unit_price": 350,
        "product_name": "原子習慣"
      },
      {
        "product_id": "P002",
        "quantity": 15,
        "unit_price": 280,
        "product_name": "被討厭的勇氣"
      }
    ],
    "total": 11250,
    "created_at": "2025-07-24T10:00:00+08:00",
    "updated_at": "2025-07-24T10:00:00+08:00"
  },
  {
    "id": "2",
    "purchase_number": "PO-20250724-0002",
    "supplier_id": "S002",
    "purchase_date": "2025-07-24T14:30:00+08:00",
    "expected_delivery_date": "2025-07-28T23:59:59+08:00",
    "status": "ordered",
    "shipping_fee": 100,
    "tax_rate": 5,
    "notes": "文具用品進貨",
    "items": [
      {
        "product_id": "P101",
        "quantity": 50,
        "unit_price": 25,
        "product_name": "筆記本"
      },
      {
        "product_id": "P102",
        "quantity": 100,
        "unit_price": 15,
        "product_name": "原子筆"
      }
    ],
    "total": 2875,
    "created_at": "2025-07-24T14:30:00+08:00",
    "updated_at": "2025-07-24T14:30:00+08:00"
  },
  {
    "id": "3",
    "purchase_number": "PO-20250723-0001",
    "supplier_id": "S003",
    "purchase_date": "2025-07-23T09:15:00+08:00",
    "expected_delivery_date": "2025-07-30T23:59:59+08:00",
    "status": "draft",
    "shipping_fee": 0,
    "tax_rate": 0,
    "notes": "草稿訂單",
    "items": [
      {
        "product_id": "P201",
        "quantity": 10,
        "unit_price": 1200,
        "product_name": "高級鋼筆"
      }
    ],
    "total": 12000,
    "created_at": "2025-07-23T09:15:00+08:00",
    "updated_at": "2025-07-23T09:15:00+08:00"
  },
  {
    "id": "4",
    "purchase_number": "PO-20250722-0001",
    "supplier_id": "S004",
    "purchase_date": "2025-07-22T11:20:00+08:00",
    "expected_delivery_date": "2025-07-29T23:59:59+08:00",
    "status": "cancelled",
    "shipping_fee": 200,
    "tax_rate": 5,
    "notes": "供應商缺貨取消",
    "items": [
      {
        "product_id": "P301",
        "quantity": 5,
        "unit_price": 2500,
        "product_name": "高級書架"
      }
    ],
    "total": 12750,
    "created_at": "2025-07-22T11:20:00+08:00",
    "updated_at": "2025-07-22T16:45:00+08:00"
  },
  {
    "id": "5",
    "purchase_number": "PO-20250721-0001",
    "supplier_id": "S005",
    "purchase_date": "2025-07-21T15:10:00+08:00",
    "expected_delivery_date": "2025-07-25T23:59:59+08:00",
    "status": "received",
    "shipping_fee": 180,
    "tax_rate": 5,
    "notes": "促銷活動用書",
    "items": [
      {
        "product_id": "P401",
        "quantity": 30,
        "unit_price": 180,
        "product_name": "暢銷小說"
      },
      {
        "product_id": "P402",
        "quantity": 20,
        "unit_price": 220,
        "product_name": "商業理財書"
      },
      {
        "product_id": "P403",
        "quantity": 15,
        "unit_price": 150,
        "product_name": "兒童繪本"
      }
    ],
    "total": 11550,
    "created_at": "2025-07-21T15:10:00+08:00",
    "updated_at": "2025-07-22T10:30:00+08:00"
  },
  {
    "id": "P0006",
    "purchase_number": "PO-20250724-0006",
    "supplier_id": "S001",
    "purchase_date": "2025-07-24",
    "expected_delivery_date": "",
    "status": "ordered",
    "shipping_fee": 5000.0,
    "tax_rate": 0.0,
    "notes": "",
    "items": [
      {
        "product_id": "P401",
        "quantity": 1,
        "unit_price": 140.0,
        "product_name": "暢銷小說"
      },
      {
        "product_id": "P301",
        "quantity": 1,
        "unit_price": 2000.0,
        "product_name": "高級書架"
      }
    ],
    "subtotal": 2140.0,
    "tax": 0.0,
    "total_amount": 7140.0,
    "payment_status": "paid",
    "created_at": "2025-07-24T17:54:01.365745",
    "updated_at": "2025-07-24T17:54:01.365745",
    "created_by": "system"
  },
  {
    "id": "P0007",
    "purchase_number": "PO-20250724-0007",
    "supplier_id": "S004",
    "purchase_date": "2025-07-24",
    "expected_delivery_date": "2025-07-24",
    "status": "ordered",
    "shipping_fee": 0.0,
    "tax_rate": 0.0,
    "notes": "",
    "items": [
      {
        "product_id": "P301",
        "quantity": 2,
        "unit_price": 2000.0,
        "product_name": "高級書架"
      }
    ],
    "subtotal": 4000.0,
    "tax": 0.0,
    "total_amount": 4000.0,
    "payment_status": "unpaid",
    "created_at": "2025-07-24T17:54:39.494246",
    "updated_at": "2025-07-24T17:54:39.494246",
    "created_by": "system"
  }
]

===== docs\data\sales.json =====
[
  {
    "id": "S001",
    "customer_id": "M001",
    "sale_date": "2025-07-20T10:15:00Z",
    "subtotal": 550,
    "discount": 50,
    "total_amount": 500,
    "payment_method": "現金",
    "items": [
      {
        "product_id": "P001",
        "quantity": 1,
        "unit_price": 300,
        "discount": 0,
        "subtotal": 300
      },
      {
        "product_id": "P002",
        "quantity": 1,
        "unit_price": 250,
        "discount": 50,
        "subtotal": 200
      }
    ],
    "notes": "會員消費",
    "created_at": "2025-07-20T10:15:00Z"
  },
  {
    "id": "S002",
    "customer_id": null,
    "sale_date": "2025-07-21T15:30:00Z",
    "subtotal": 900,
    "discount": 0,
    "total_amount": 900,
    "payment_method": "信用卡",
    "items": [
      {
        "product_id": "P003",
        "quantity": 2,
        "unit_price": 450,
        "discount": 0,
        "subtotal": 900
      }
    ],
    "notes": "非會員消費",
    "created_at": "2025-07-21T15:30:00Z"
  }
]

===== docs\data\suppliers.json =====
[
  {
    "id": "S001",
    "name": "天下文化",
    "contact_person": "王經理",
    "phone": "02-2517-3688",
    "email": "service@bookzone.com.tw",
    "address": "台北市松江路209號1樓",
    "tax_id": "12345678",
    "payment_terms": "月結30天",
    "bank_account": "012-123456789012",
    "bank_name": "台灣銀行 營業部",
    "notes": "主要供應暢銷書籍",
    "created_at": "2025-01-15T10:00:00+08:00",
    "updated_at": "2025-07-24T10:00:00+08:00"
  },
  {
    "id": "S002",
    "name": "金石堂文具批發",
    "contact_person": "林小姐",
    "phone": "02-2369-1234",
    "email": "stationery@kingstone.com.tw",
    "address": "台北市中正區重慶南路一段119號",
    "tax_id": "23456789",
    "payment_terms": "現金7天",
    "bank_account": "013-234567890123",
    "bank_name": "國泰世華銀行 城中分行",
    "notes": "文具用品批發",
    "created_at": "2025-02-10T09:30:00+08:00",
    "updated_at": "2025-07-24T14:30:00+08:00"
  },
  {
    "id": "S003",
    "name": "誠品精品文具",
    "contact_person": "陳經理",
    "phone": "02-6639-6888",
    "email": "eslite@eslite.com",
    "address": "台北市信義區菸廠路88號",
    "tax_id": "34567890",
    "payment_terms": "月結15天",
    "bank_account": "012-345678901234",
    "bank_name": "中國信託 信義分行",
    "notes": "高級文具與禮品",
    "created_at": "2025-03-05T14:20:00+08:00",
    "updated_at": "2025-07-23T09:15:00+08:00"
  },
  {
    "id": "S004",
    "name": "IKEA 商業採購",
    "contact_person": "張專員",
    "phone": "02-412-8869",
    "email": "business@ikea.com.tw",
    "address": "新北市新莊區中正路1號",
    "tax_id": "45678901",
    "payment_terms": "月結30天",
    "bank_account": "007-456789012345",
    "bank_name": "花旗銀行 台北分行",
    "notes": "傢俱與收納解決方案",
    "created_at": "2025-04-12T11:15:00+08:00",
    "updated_at": "2025-07-22T16:45:00+08:00"
  },
  {
    "id": "S005",
    "name": "博客來經銷中心",
    "contact_person": "黃經理",
    "phone": "02-2653-5588",
    "email": "b2b@books.com.tw",
    "address": "台北市大安區光復南路102號3樓",
    "tax_id": "56789012",
    "payment_terms": "月結30天",
    "bank_account": "008-567890123456",
    "bank_name": "玉山銀行 敦南分行",
    "notes": "各類書籍批發",
    "created_at": "2025-05-20T13:45:00+08:00",
    "updated_at": "2025-07-22T10:30:00+08:00"
  }
]

===== docs\static\js\main.js =====
// static/js/main.js (替換後的全新內容)

class BookstoreApp {
    constructor() {
        // 這裡不直接使用 new UI()，而是等到 ui.js 自己初始化
        // 這樣可以確保我們總是使用同一個 ui 實例
        this.ui = window.ui;
        this.initializeMobileMenu();
    }

    // 初始化移動端菜單
    initializeMobileMenu() {
        const menuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        
        if (menuButton && mobileMenu) {
            menuButton.addEventListener('click', (e) => {
                e.stopPropagation();
                mobileMenu.classList.toggle('hidden');
            });
        }
    }
}

// 確保在 DOM 載入後，並且 ui.js 已經初始化完畢
document.addEventListener('DOMContentLoaded', () => {
    if (window.ui) {
        window.app = new BookstoreApp();
    } else {
        console.error('UI module not found. Make sure ui.js is loaded correctly.');
    }
});


===== docs\static\js\members.js =====
// static/js/members.js (全新內容)

document.addEventListener('DOMContentLoaded', function() {
    // DOM 元素
    const newMemberBtn = document.getElementById('new-member-btn');
    const memberModal = document.getElementById('member-modal');
    const memberModalTitle = document.getElementById('member-modal-title');
    const memberForm = document.getElementById('member-form');
    const closeModalBtn = document.getElementById('close-member-modal');
    const cancelFormBtn = document.getElementById('cancel-member-form');
    const membersList = document.getElementById('members-list');
    
    let allMembers = [];

    // 開啟 Modal
    const openMemberModal = (member = null) => {
        memberForm.reset();
        document.getElementById('member-id').value = '';

        if (member) {
            // 編輯
            memberModalTitle.textContent = '編輯會員';
            document.getElementById('member-id').value = member.id;
            document.getElementById('name').value = member.name || '';
            document.getElementById('phone').value = member.phone || '';
            document.getElementById('email').value = member.email || '';
            document.getElementById('birthday').value = member.birthday || '';
            document.getElementById('member-level').value = member.member_level || 'standard';
            document.getElementById('status').value = member.status || 'active';
            document.getElementById('address').value = member.address || '';
            document.getElementById('notes').value = member.notes || '';
        } else {
            // 新增
            memberModalTitle.textContent = '新增會員';
        }
        memberModal.classList.remove('hidden');
    };
    
    // 關閉 Modal
    const closeMemberModal = () => {
        memberModal.classList.add('hidden');
    };

    // 載入會員資料
    const loadMembers = async () => {
        window.app.ui.showLoading('載入會員資料中...');
        try {
            const response = await fetch('./data/members.json');
            if (!response.ok) throw new Error('無法載入會員資料');
            allMembers = await response.json();
            renderMembers(allMembers);
        } catch (error) {
            console.error('載入會員資料失敗:', error);
            window.app.ui.showNotification('error', '載入會員資料失敗');
        } finally {
            window.app.ui.hideLoading();
        }
    };

    // 渲染列表
    const renderMembers = (members) => {
        if (members.length === 0) {
            membersList.innerHTML = `<tr><td colspan="8" class="text-center py-4">沒有會員資料</td></tr>`;
            return;
        }

        membersList.innerHTML = members.map(member => {
             const statusBadge = member.status === 'active' 
                ? '<span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">啟用中</span>'
                : '<span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">已停用</span>';
            
            return `
                <tr data-id="${member.id}">
                    <td class="px-6 py-4">${member.id}</td>
                    <td class="px-6 py-4">${member.name}</td>
                    <td class="px-6 py-4">${member.phone}</td>
                    <td class="px-6 py-4">${member.email || '-'}</td>
                    <td class="px-6 py-4">$${(member.total_spent || 0).toLocaleString()}</td>
                    <td class="px-6 py-4">${member.member_level || 'standard'}</td>
                    <td class="px-6 py-4">${statusBadge}</td>
                    <td class="px-6 py-4 text-right">
                        <button class="text-blue-600 hover:text-blue-900 edit-member"><i class="fas fa-edit"></i> 編輯</button>
                        <button class="text-red-600 hover:text-red-900 ml-4 delete-member"><i class="fas fa-trash"></i> 刪除</button>
                    </td>
                </tr>
            `;
        }).join('');
    };

    // 處理表單提交
    const handleFormSubmit = (e) => {
        e.preventDefault();
        const memberId = document.getElementById('member-id').value;
        const isEdit = !!memberId;
        
        const memberData = {
            name: document.getElementById('name').value.trim(),
            phone: document.getElementById('phone').value.trim(),
            email: document.getElementById('email').value.trim(),
            birthday: document.getElementById('birthday').value,
            member_level: document.getElementById('member-level').value,
            status: document.getElementById('status').value,
            address: document.getElementById('address').value.trim(),
            notes: document.getElementById('notes').value.trim(),
        };

        if (!memberData.name || !memberData.phone) {
            window.app.ui.showNotification('error', '請填寫姓名與電話');
            return;
        }

        const url = isEdit ? `./data/members.json/${memberId}` : './data/members.json';
        const method = isEdit ? 'PUT' : 'POST';

        window.app.ui.showLoading('儲存中...');
        try {
            const response = await fetch(url, {
                method: method,
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(memberData)
            });

            if (!response.ok) {
                const err = await response.json();
                throw new Error(err.detail || '儲存失敗');
            }

            window.app.ui.showNotification('success', '會員資料儲存成功！');
            closeMemberModal();
            loadMembers();
        } catch (error) {
            console.error('儲存會員失敗:', error);
            window.app.ui.showNotification('error', error.message);
        } finally {
            window.app.ui.hideLoading();
        }
    };
    
    // 處理列表點擊
    const handleListClick = (e) => {
        const target = e.target.closest('button');
        if (!target) return;
        
        const row = target.closest('tr');
        const memberId = row.dataset.id;
        const member = allMembers.find(m => m.id === memberId);

        if (target.classList.contains('edit-member')) {
            if (member) openMemberModal(member);
        }

        if (target.classList.contains('delete-member')) {
            window.app.ui.showConfirmDialog({
                title: '確認刪除',
                message: `您確定要刪除會員 "${member.name}" 嗎？`,
            }).then(confirmed => {
                if (confirmed) deleteMember(memberId);
            });
        }
    };

    // 刪除會員
    const deleteMember = (memberId) => {
        window.app.ui.showLoading('刪除中...');
        try {
            const response = await fetch(`./data/members.json/${memberId}`, { method: 'DELETE' });
            if (!response.ok) {
                const err = await response.json();
                throw new Error(err.detail || '刪除失敗');
            }
            window.app.ui.showNotification('success', '會員已刪除');
            loadMembers();
        } catch (error) {
            console.error('刪除會員失敗:', error);
            window.app.ui.showNotification('error', error.message);
        } finally {
            window.app.ui.hideLoading();
        }
    };

    // 設定事件監聽器
    newMemberBtn.addEventListener('click', () => openMemberModal());
    closeModalBtn.addEventListener('click', closeMemberModal);
    cancelFormBtn.addEventListener('click', closeMemberModal);
    memberForm.addEventListener('submit', handleFormSubmit);
    membersList.addEventListener('click', handleListClick);

    // 初始載入
    loadMembers();
});

===== docs\static\js\products.js =====
// static/js/products.js (全新內容)

document.addEventListener('DOMContentLoaded', () => {
    // DOM 元素
    const addProductBtn = document.getElementById('addProductBtn');
    const productModal = document.getElementById('productModal');
    const modalTitle = document.getElementById('modalTitle');
    const productForm = document.getElementById('productForm');
    const saveProductBtn = document.getElementById('saveProductBtn');
    const cancelProductBtn = document.getElementById('cancelProductBtn');
    const productsTableBody = document.getElementById('productsTableBody');
    
    // 篩選元素
    const searchInput = document.getElementById('searchInput');
    const categoryFilter = document.getElementById('categoryFilter');
    const statusFilter = document.getElementById('statusFilter');

    let allProducts = []; // 用於儲存所有商品資料

    // 顯示 Modal
    const showModal = (isEdit = false, product = null) => {
        productForm.reset();
        document.getElementById('productId').value = '';
        
        if (isEdit && product) {
            modalTitle.textContent = '編輯商品';
            document.getElementById('productId').value = product.id;
            document.getElementById('productName').value = product.name || '';
            document.getElementById('category').value = product.category || '';
            document.getElementById('supplier').value = product.supplier_id || '';
            // 修正：使用 product.purchase_price
            document.getElementById('costPrice').value = product.purchase_price || 0; 
            // 修正：使用 product.sale_price
            document.getElementById('salePrice').value = product.sale_price || 0; 
             // 修正：使用 product.stock
            document.getElementById('stock').value = product.stock || 0;
            document.getElementById('minStock').value = product.minStock || 5;
            document.getElementById('unit').value = product.unit || '個';
            document.getElementById('description').value = product.description || '';
        } else {
            modalTitle.textContent = '新增商品';
        }
        productModal.classList.remove('hidden');
        document.body.classList.add('overflow-hidden');
    };

    // 隱藏 Modal
    const closeModal = () => {
        productModal.classList.add('hidden');
        document.body.classList.remove('overflow-hidden');
    };

    // 載入商品資料
    const loadProducts = async () => {
        window.app.ui.showLoading('載入商品中...');
        try {
            // 注意：靜態版本中，這個路徑會被 build 腳本自動替換
            const response = await fetch('./data/products.json');
            if (!response.ok) throw new Error('無法獲取商品列表');
            allProducts = await response.json();
            renderTable(allProducts);
        } catch (error) {
            console.error('載入商品失敗:', error);
            window.app.ui.showNotification('error', '載入商品失敗');
        } finally {
            window.app.ui.hideLoading();
        }
    };

    // 渲染商品表格
    const renderTable = (products) => {
        if (products.length === 0) {
            productsTableBody.innerHTML = `<tr><td colspan="7" class="text-center py-4">沒有商品資料</td></tr>`;
            return;
        }

        productsTableBody.innerHTML = products.map(product => {
            const stock = parseInt(product.stock, 10) || 0;
            const minStock = parseInt(product.minStock, 10) || 5;
            let statusBadge;

            if (stock <= 0) {
                statusBadge = `<span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">無庫存</span>`;
            } else if (stock <= minStock) {
                statusBadge = `<span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">低庫存</span>`;
            } else {
                statusBadge = `<span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">庫存正常</span>`;
            }

            return `
                <tr data-id="${product.id}">
                    <td class="px-6 py-4 whitespace-nowrap">${product.name}</td>
                    <td class="px-6 py-4 whitespace-nowrap">${product.category || '-'}</td>
                    <td class="px-6 py-4 whitespace-nowrap">$${product.purchase_price || 0}</td>
                    <td class="px-6 py-4 whitespace-nowrap">$${product.sale_price || 0}</td>
                    <td class="px-6 py-4 whitespace-nowrap">${stock}</td>
                    <td class="px-6 py-4 whitespace-nowrap">${statusBadge}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button class="text-blue-600 hover:text-blue-900 edit-btn"><i class="fas fa-edit"></i> 編輯</button>
                        <button class="text-red-600 hover:text-red-900 ml-4 delete-btn"><i class="fas fa-trash"></i> 刪除</button>
                    </td>
                </tr>
            `;
        }).join('');
    };

    // 處理表單提交
    const handleFormSubmit = () => {
        const productId = document.getElementById('productId').value;
        const isEdit = !!productId;
        
        const formData = new FormData(productForm);
        const productData = {
            name: formData.get('productName'),
            category: formData.get('category'),
            purchase_price: parseFloat(formData.get('costPrice')),
            sale_price: parseFloat(formData.get('salePrice')),
            stock: parseInt(formData.get('stock'), 10),
            // ... 其他欄位
        };

        // 在靜態網站中，我們不能真的提交表單，這裡僅為示範
        // 實際部署時，這些操作 (新增/編輯/刪除) 會無法運作
        if (isEdit) {
             console.log("更新商品:", productId, productData);
        } else {
             console.log("新增商品:", productData);
        }
        window.app.ui.showNotification('info', '靜態頁面不支持此操作');
        closeModal();
    };

    // 處理表格中的點擊事件 (編輯與刪除)
    const handleTableClick = (e) => {
        const target = e.target;
        const row = target.closest('tr');
        if (!row) return;

        const productId = row.dataset.id;
        
        if (target.closest('.edit-btn')) {
            const product = allProducts.find(p => p.id === productId);
            if(product) showModal(true, product);
        }

        if (target.closest('.delete-btn')) {
            window.app.ui.showConfirmDialog({
                title: '確認刪除',
                message: `您確定要刪除商品 #${productId} 嗎？此操作無法復原。`,
                confirmText: '確認刪除',
            }).then(confirmed => {
                if (confirmed) {
                    // 靜態網站無法真的刪除
                    window.app.ui.showNotification('info', '靜態頁面不支持刪除操作');
                }
            });
        }
    };

    // 設定事件監聽器
    addProductBtn.addEventListener('click', () => showModal());
    cancelProductBtn.addEventListener('click', closeModal);
    saveProductBtn.addEventListener('click', handleFormSubmit);
    productsTableBody.addEventListener('click', handleTableClick);

    // 初始載入
    loadProducts();
});

===== docs\static\js\purchases.js =====
// static/js/purchases.js (全新內容)

document.addEventListener('DOMContentLoaded', function() {
    // DOM 元素
    const purchasesList = document.getElementById('purchases-list');
    const newPurchaseBtn = document.getElementById('new-purchase-btn');
    const purchaseDetailModal = document.getElementById('purchase-detail-modal');

    let allPurchases = [];
    let allSuppliers = [];

    // 初始化
    const init = async () => {
        window.app.ui.showLoading('載入資料中...');
        try {
            await Promise.all([loadSuppliers(), loadPurchases()]);
            renderPurchases(allPurchases);
        } catch (error) {
            console.error('初始化失敗:', error);
            window.app.ui.showNotification('error', '頁面初始化失敗');
        } finally {
            window.app.ui.hideLoading();
        }
    };

    // 載入供應商資料 (用於顯示名稱)
    const loadSuppliers = async () => {
        try {
            const response = await fetch('./data/suppliers.json');
            if (!response.ok) throw new Error('無法載入供應商');
            allSuppliers = await response.json();
        } catch (error) {
            console.error(error);
            // 即使供應商載入失敗，也繼續執行
        }
    };

    // 載入進貨紀錄
    const loadPurchases = async () => {
        const response = await fetch('./data/purchases.json');
        if (!response.ok) throw new Error('無法載入進貨紀錄');
        const result = await response.json();
        // API 回傳的資料結構是 { "data": [...] }
        allPurchases = result || []; 
    };

    // 渲染進貨列表
    const renderPurchases = (purchases) => {
        if (!purchasesList) return;
        if (purchases.length === 0) {
            purchasesList.innerHTML = `<tr><td colspan="7" class="text-center py-4">沒有任何進貨紀錄</td></tr>`;
            return;
        }

        purchasesList.innerHTML = purchases.map(purchase => {
            const supplier = allSuppliers.find(s => s.id === purchase.supplier_id);
            const supplierName = supplier ? supplier.name : '未知供應商';
            const itemCount = purchase.items ? purchase.items.length : 0;
            const statusMap = {
                draft: { text: '草稿', color: 'bg-gray-100 text-gray-800' },
                ordered: { text: '已訂購', color: 'bg-blue-100 text-blue-800' },
                received: { text: '已到貨', color: 'bg-green-100 text-green-800' },
                cancelled: { text: '已取消', color: 'bg-red-100 text-red-800' }
            };
            const statusInfo = statusMap[purchase.status] || { text: '未知', color: 'bg-gray-100' };
            const statusBadge = `<span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${statusInfo.color}">${statusInfo.text}</span>`;

            return `
                <tr data-id="${purchase.id}">
                    <td class="px-6 py-4 whitespace-nowrap text-blue-600 font-medium cursor-pointer view-details">${purchase.purchase_number || purchase.id}</td>
                    <td class="px-6 py-4 whitespace-nowrap">${supplierName}</td>
                    <td class="px-6 py-4 whitespace-nowrap">${itemCount} 項</td>
                    <td class="px-6 py-4 whitespace-nowrap">$${(purchase.total || purchase.total_amount || 0).toLocaleString()}</td>
                    <td class="px-6 py-4 whitespace-nowrap">${new Date(purchase.purchase_date).toLocaleDateString()}</td>
                    <td class="px-6 py-4 whitespace-nowrap">${statusBadge}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <a href="/purchases/edit/${purchase.id}" class="text-indigo-600 hover:text-indigo-900"><i class="fas fa-edit"></i> 編輯</a>
                        <button class="text-red-600 hover:text-red-900 ml-4 delete-purchase"><i class="fas fa-trash"></i> 刪除</button>
                    </td>
                </tr>
            `;
        }).join('');
    };

    // 顯示進貨明細 Modal
    const viewPurchaseDetails = async (purchaseId) => {
        window.app.ui.showLoading('載入明細中...');
        try {
            const response = await fetch(`./data/purchases.json/${purchaseId}`);
            if (!response.ok) throw new Error('無法獲取明細');
            const result = await response.json();
            const purchase = result;
            
            const supplier = allSuppliers.find(s => s.id === purchase.supplier_id);
            
            // 填充 Modal 內容
            document.getElementById('purchase-id').textContent = purchase.purchase_number || purchase.id;
            document.getElementById('supplier-name').textContent = supplier ? supplier.name : '未知供應商';
            document.getElementById('purchase-date').textContent = new Date(purchase.purchase_date).toLocaleString();
            document.getElementById('purchase-status').textContent = purchase.status;
            document.getElementById('purchase-notes').textContent = purchase.notes || '無';
            
            const itemsTbody = document.getElementById('purchase-items');
            itemsTbody.innerHTML = purchase.items.map(item => `
                <tr>
                    <td class="px-3 py-2">${item.product_id}</td>
                    <td class="px-3 py-2">${item.product_name}</td>
                    <td class="px-3 py-2 text-center">$${item.unit_price.toLocaleString()}</td>
                    <td class="px-3 py-2 text-center">${item.quantity}</td>
                    <td class="px-3 py-2 text-right">$${(item.unit_price * item.quantity).toLocaleString()}</td>
                </tr>
            `).join('');
            
            // 計算總計
            const subtotal = purchase.items.reduce((acc, item) => acc + item.unit_price * item.quantity, 0);
            document.getElementById('purchase-subtotal').textContent = `$${subtotal.toLocaleString()}`;
            document.getElementById('purchase-shipping').textContent = `$${(purchase.shipping_fee || 0).toLocaleString()}`;
            document.getElementById('purchase-total').textContent = `$${(purchase.total || purchase.total_amount || 0).toLocaleString()}`;

            // 顯示 Modal
            purchaseDetailModal.classList.remove('hidden');
            document.body.classList.add('overflow-hidden');

        } catch (error) {
            console.error('顯示明細失敗:', error);
            window.app.ui.showNotification('error', '無法顯示進貨明細');
        } finally {
            window.app.ui.hideLoading();
        }
    };
    
    // 刪除進貨單
    const deletePurchase = (purchaseId) => {
        const confirmed = await window.app.ui.showConfirmDialog({ title: '確認刪除', message: '您確定要刪除這筆進貨單嗎？' });
        if (!confirmed) return;

        window.app.ui.showLoading('刪除中...');
        try {
            const response = await fetch(`./data/purchases.json/${purchaseId}`, { method: 'DELETE' });
            if (!response.ok) {
                const err = await response.json();
                throw new Error(err.detail || '刪除失敗');
            }
            window.app.ui.showNotification('success', '進貨單已刪除');
            // 重新載入資料
            await loadPurchases();
            renderPurchases(allPurchases);
        } catch (error) {
            console.error('刪除失敗:', error);
            window.app.ui.showNotification('error', error.message);
        } finally {
            window.app.ui.hideLoading();
        }
    };


    // 設定事件監聽器
    newPurchaseBtn.addEventListener('click', () => {
        window.location.href = '/purchases/new';
    });

    purchasesList.addEventListener('click', (e) => {
        const purchaseId = e.target.closest('tr').dataset.id;
        if (e.target.closest('.view-details')) {
            viewPurchaseDetails(purchaseId);
        }
        if (e.target.closest('.delete-purchase')) {
            deletePurchase(purchaseId);
        }
    });

    purchaseDetailModal.addEventListener('click', (e) => {
        if (e.target.classList.contains('close-modal-btn') || e.target.closest('.close-modal-btn')) {
            purchaseDetailModal.classList.add('hidden');
            document.body.classList.remove('overflow-hidden');
        }
    });

    // 初始載入
    init();
});